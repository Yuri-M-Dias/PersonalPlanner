
<html>

	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
		<title>PersonalPlanner</title>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.7/css/materialize.min.css">
		<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
	</head>

	<body class="row">
		<nav>
			<div class="nav-wrapper teal darken-2">
				<a href="#" class="brand-logo center">Cálculo de Juros Simples</a>
			</div>
		</nav>

		<div id="form" class="col s6 offset-s3">

			<div class="row">
				<div class="input-field col s6">
					<input id="valorOriginal" name="valorOriginal" type="text" class="validate" step="0.01">
					<label for="valorOriginal">Valor Original</label>
				</div>
				<div class="input-field col s6">
					<input id="taxa" name="taxa" type="number" class="validate" step="0.01">
					<label for="taxa">Taxa</label>
				</div>
			</div>

			<div class="row">
				<div class="input-field col s6">
					<input id="periodo" type="number" name="periodo" class="validate">
					<label for="periodo">Período</label>
				</div>
				<div class="input-field col s3">
					<select id="tipoJuros" name="tipoJuros">
						<option value="S">Simples</option>
						<option value="C">Composto</option>
					</select>
					<label>Tipo de Juros</label>
				</div>
			</div>

			<div class="row">
				<div class="input-field col offset-s4">
					<button data-target="modalResult" class="modal-trigger twaves-effect waves-light btn-large">
						Calcular
					</button>
				</div>
			</div>

		</div>

		<div id="modalResult" class="modal">
			<div class="modal-content">
				<h4>Resultado</h4>
				<div class="row">
					<div class="col s4">
						<input id="prestacao" type="number" name="prestacao" step="0.01" readonly>
						<label for="prestacao">Cada Prestação...</label>
					</div>
					<div class="col s4">
						<input id="quantasVezes" type="number" name="quantasVezes" step="0.01" readonly>
						<label for="quantasVezes">Multiplicado por...</label>
					</div>
					<div class="col s4">
						<input id="valorFinal" type="number" name="valorFinal" step="0.01" readonly>
						<label for="valorFinal">Resulta em.</label>
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">Calcular de novo</a>
			</div>
		</div>

		<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.7/js/materialize.min.js"></script>

		<script text="text/javascript">
			$(document).ready(function () {
				$('select').material_select();

				$('.modal-trigger').leanModal({
					dismissible: true,
					opacity: .5,
					in_duration: 300,
					out_duration: 200,
					starting_top: '4%',
					ending_top: '10%',
					ready: function() {
						var valorOriginal = Number($('#valorOriginal').val());
						var taxa = Number($('#taxa').val());
						var periodo = Number($('#periodo').val());
						//TODO: calcular juros simples ou compostos
						var tipoJuros = $('#tipoJuros').val();
						var porcetangemJuros = 0;
						var valorFinal = (1 + porcetangemJuros) * valorOriginal;
						if(tipoJuros === 'S') {
							porcetangemJuros = calculaJurosSimples(taxa, periodo);
							valorFinal = (1 + porcetangemJuros) * valorOriginal;
						} else if (tipoJuros === 'C') {
							porcetangemJuros = calculaJurosCompostos(taxa, periodo);
							valorFinal = porcetangemJuros * valorOriginal;
						}
						//TODO: cada prestação do composto?
						var prestacao = valorFinal / periodo;
						$('#valorFinal').val(valorFinal);
						$('#prestacao').val(prestacao);
						$('#quantasVezes').val(periodo);
					}
				});

				function calculaJurosSimples(taxa, periodo) {
					var juros = (taxa / 100) * periodo;
					return juros;
				}

				function calculaJurosCompostos(taxa, periodo) {
					var juros = Math.pow(((taxa / 100) + 1), periodo);
					return juros;
				}

			});
		</script>

	</body>

</html>
